-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–±—ã—á–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è Roblox
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local ContextActionService = game:GetService("ContextActionService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
local MAX_DISTANCE = 1000
local isGuiVisible = true
local gui = nil
local originalProximityPromptRange = 10 -- –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

-- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
local originalFireProximityPrompt
local originalFireClickDetector

-- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è GUI
function createGUI()
    -- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "DistanceModifierGUI"
    screenGui.Parent = game.CoreGui
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true

    -- –ì–ª–∞–≤–Ω—ã–π —Ñ—Ä–µ–π–º
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, 350, 0, 250)
    mainFrame.Position = UDim2.new(0.5, -175, 0.1, 0)
    mainFrame.AnchorPoint = Vector2.new(0.5, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = mainFrame

    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 40)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Text = "üîß –ú–û–î–ò–§–ò–ö–ê–¢–û–† –î–ê–õ–¨–ù–û–°–¢–ò"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 16
    title.Parent = mainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 8)
    titleCorner.Parent = title

    -- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -35, 0, 5)
    closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.Text = "√ó"
    closeButton.Font = Enum.Font.GothamBold
    closeButton.TextSize = 20
    closeButton.Parent = title
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 15)
    closeCorner.Parent = closeButton

    -- –ö–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∏—è
    local hideButton = Instance.new("TextButton")
    hideButton.Size = UDim2.new(0, 30, 0, 30)
    hideButton.Position = UDim2.new(1, -70, 0, 5)
    hideButton.BackgroundColor3 = Color3.fromRGB(100, 100, 150)
    hideButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    hideButton.Text = "‚îÄ"
    hideButton.Font = Enum.Font.GothamBold
    hideButton.TextSize = 20
    hideButton.Parent = title
    
    local hideCorner = Instance.new("UICorner")
    hideCorner.CornerRadius = UDim.new(0, 15)
    hideCorner.Parent = hideButton

    -- –ö–æ–Ω—Ç–µ–Ω—Ç
    local contentFrame = Instance.new("Frame")
    contentFrame.Size = UDim2.new(1, -20, 1, -60)
    contentFrame.Position = UDim2.new(0, 10, 0, 50)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Parent = mainFrame

    -- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Ä–∞–¥–∏—É—Å–∞
    local radiusLabel = Instance.new("TextLabel")
    radiusLabel.Size = UDim2.new(1, 0, 0, 20)
    radiusLabel.Position = UDim2.new(0, 0, 0, 0)
    radiusLabel.BackgroundTransparency = 1
    radiusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    radiusLabel.Text = "–î–∞–ª—å–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (studs):"
    radiusLabel.Font = Enum.Font.Gotham
    radiusLabel.TextSize = 12
    radiusLabel.TextXAlignment = Enum.TextXAlignment.Left
    radiusLabel.Parent = contentFrame

    local radiusInput = Instance.new("TextBox")
    radiusInput.Size = UDim2.new(1, 0, 0, 30)
    radiusInput.Position = UDim2.new(0, 0, 0, 25)
    radiusInput.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    radiusInput.TextColor3 = Color3.fromRGB(255, 255, 255)
    radiusInput.Text = tostring(MAX_DISTANCE)
    radiusInput.Font = Enum.Font.Gotham
    radiusInput.TextSize = 14
    radiusInput.PlaceholderText = "–í–≤–µ–¥–∏—Ç–µ –¥–∞–ª—å–Ω–æ—Å—Ç—å..."
    radiusInput.Parent = contentFrame
    
    local inputCorner = Instance.new("UICorner")
    inputCorner.CornerRadius = UDim.new(0, 6)
    inputCorner.Parent = radiusInput
    
    local inputPadding = Instance.new("UIPadding")
    inputPadding.PaddingLeft = UDim.new(0, 10)
    inputPadding.PaddingRight = UDim.new(0, 10)
    inputPadding.Parent = radiusInput

    -- –ö–Ω–æ–ø–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–∞–¥–∏—É—Å–∞
    local applyButton = Instance.new("TextButton")
    applyButton.Size = UDim2.new(1, 0, 0, 35)
    applyButton.Position = UDim2.new(0, 0, 0, 65)
    applyButton.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
    applyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    applyButton.Text = "–ü–†–ò–ú–ï–ù–ò–¢–¨ –î–ê–õ–¨–ù–û–°–¢–¨"
    applyButton.Font = Enum.Font.GothamBold
    applyButton.TextSize = 14
    applyButton.Parent = contentFrame
    
    local applyCorner = Instance.new("UICorner")
    applyCorner.CornerRadius = UDim.new(0, 6)
    applyCorner.Parent = applyButton

    -- –°—Ç–∞—Ç—É—Å
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(1, 0, 0, 20)
    statusLabel.Position = UDim2.new(0, 0, 0, 110)
    statusLabel.BackgroundTransparency = 1
    statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    statusLabel.Text = "–°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–Ω–æ"
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextSize = 12
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = contentFrame

    -- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    local infoLabel = Instance.new("TextLabel")
    infoLabel.Size = UDim2.new(1, 0, 0, 50)
    infoLabel.Position = UDim2.new(0, 0, 0, 135)
    infoLabel.BackgroundTransparency = 1
    infoLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
    infoLabel.Text = "üìã –†–∞–±–æ—Ç–∞–µ—Ç —Å: ProximityPrompt, ClickDetector, TouchTransmitter"
    infoLabel.Font = Enum.Font.Gotham
    infoLabel.TextSize = 11
    infoLabel.TextWrapped = true
    infoLabel.TextXAlignment = Enum.TextXAlignment.Left
    infoLabel.Parent = contentFrame

    -- –ö–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑–∞ GUI (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞)
    local showButton = Instance.new("TextButton")
    showButton.Size = UDim2.new(0, 120, 0, 40)
    showButton.Position = UDim2.new(0.5, -60, 0, 10)
    showButton.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
    showButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    showButton.Text = "üìã –ü–û–ö–ê–ó–ê–¢–¨ GUI"
    showButton.Font = Enum.Font.GothamBold
    showButton.TextSize = 14
    showButton.Visible = false
    showButton.Parent = screenGui
    
    local showCorner = Instance.new("UICorner")
    showCorner.CornerRadius = UDim.new(0, 8)
    showCorner.Parent = showButton

    return {
        ScreenGui = screenGui,
        MainFrame = mainFrame,
        CloseButton = closeButton,
        HideButton = hideButton,
        ShowButton = showButton,
        RadiusInput = radiusInput,
        ApplyButton = applyButton,
        StatusLabel = statusLabel,
        InfoLabel = infoLabel
    }
end

-- –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è GUI
function hideGUI()
    if gui then
        gui.MainFrame.Visible = false
        gui.ShowButton.Visible = true
        isGuiVisible = false
    end
end

function showGUI()
    if gui then
        gui.MainFrame.Visible = true
        gui.ShowButton.Visible = false
        isGuiVisible = true
    end
end

function closeGUI()
    if gui then
        gui.ScreenGui:Destroy()
        gui = nil
    end
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏
function isWithinDistance(position)
    local character = player.Character
    if not character then return false end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return false end
    
    local distance = (position - humanoidRootPart.Position).Magnitude
    return distance <= MAX_DISTANCE
end

-- –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é fireproximityprompt
function modifyProximityPromptSystem()
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
    originalFireProximityPrompt = fireproximityprompt
    
    -- –ó–∞–º–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é
    fireproximityprompt = function(prompt, ...)
        if prompt and prompt:IsA("ProximityPrompt") then
            local promptPosition = prompt.Parent:IsA("BasePart") and prompt.Parent.Position or prompt.Parent:GetPivot().Position
            
            if isWithinDistance(promptPosition) then
                return originalFireProximityPrompt(prompt, ...)
            else
                warn("–û–±—ä–µ–∫—Ç —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ: " .. prompt.Parent.Name)
                return nil
            end
        end
        return originalFireProximityPrompt(prompt, ...)
    end
    
    -- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ ProximityPrompt
    for _, prompt in ipairs(workspace:GetDescendants()) do
        if prompt:IsA("ProximityPrompt") then
            originalProximityPromptRange = prompt.MaxActivationDistance
            prompt.MaxActivationDistance = 10000 -- –í—Ä–µ–º–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫
        end
    end
end

-- –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é fireclickdetector
function modifyClickDetectorSystem()
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
    originalFireClickDetector = fireclickdetector
    
    -- –ó–∞–º–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é
    fireclickdetector = function(detector, ...)
        if detector and detector:IsA("ClickDetector") then
            local detectorPosition = detector.Parent:IsA("BasePart") and detector.Parent.Position or detector.Parent:GetPivot().Position
            
            if isWithinDistance(detectorPosition) then
                return originalFireClickDetector(detector, ...)
            else
                warn("–û–±—ä–µ–∫—Ç —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ: " .. detector.Parent.Name)
                return nil
            end
        end
        return originalFireClickDetector(detector, ...)
    end
end

-- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º TouchTransmitter (–¥–ª—è touch —ç–∫—Ä–∞–Ω–æ–≤)
function modifyTouchTransmitterSystem()
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            local touchTransmitter = part:FindFirstChildOfClass("TouchTransmitter")
            if touchTransmitter then
                part.Touched:Connect(function(otherPart)
                    if otherPart.Name == "HumanoidRootPart" and otherPart.Parent == player.Character then
                        if not isWithinDistance(part.Position) then
                            -- –ë–ª–æ–∫–∏—Ä—É–µ–º touch –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –µ—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ
                            return
                        end
                    end
                end)
            end
        end
    end
end

-- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function restoreOriginalFunctions()
    if originalFireProximityPrompt then
        fireproximityprompt = originalFireProximityPrompt
    end
    
    if originalFireClickDetector then
        fireclickdetector = originalFireClickDetector
    end
    
    -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ProximityPrompt
    for _, prompt in ipairs(workspace:GetDescendants()) do
        if prompt:IsA("ProximityPrompt") then
            prompt.MaxActivationDistance = originalProximityPromptRange
        end
    end
end

-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
function initializeSystem()
    -- –°–æ–∑–¥–∞–µ–º GUI
    gui = createGUI()
    
    -- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
    modifyProximityPromptSystem()
    modifyClickDetectorSystem()
    modifyTouchTransmitterSystem()

    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π GUI
    gui.CloseButton.MouseButton1Click:Connect(function()
        restoreOriginalFunctions()
        closeGUI()
    end)

    gui.HideButton.MouseButton1Click:Connect(hideGUI)
    gui.ShowButton.MouseButton1Click:Connect(showGUI)

    gui.ApplyButton.MouseButton1Click:Connect(function()
        local newRadius = tonumber(gui.RadiusInput.Text)
        if newRadius and newRadius > 0 then
            MAX_DISTANCE = math.min(newRadius, 10000)
            gui.RadiusInput.Text = tostring(MAX_DISTANCE)
            gui.StatusLabel.Text = "–î–∞–ª—å–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: " .. MAX_DISTANCE .. " studs"
            gui.StatusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            
            gui.ApplyButton.BackgroundColor3 = Color3.fromRGB(80, 200, 80)
            task.wait(0.3)
            gui.ApplyButton.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
        else
            gui.StatusLabel.Text = "–û—à–∏–±–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ!"
            gui.StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
            gui.RadiusInput.Text = tostring(MAX_DISTANCE)
        end
    end)

    -- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ —Ä–∞–¥–∏—É—Å–∞
    gui.RadiusInput.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            local newRadius = tonumber(gui.RadiusInput.Text)
            if newRadius and newRadius > 0 then
                MAX_DISTANCE = math.min(newRadius, 10000)
                gui.RadiusInput.Text = tostring(MAX_DISTANCE)
                gui.StatusLabel.Text = "–î–∞–ª—å–Ω–æ—Å—Ç—å: " .. MAX_DISTANCE .. " studs"
                gui.StatusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            else
                gui.RadiusInput.Text = tostring(MAX_DISTANCE)
            end
        end
    end)

    -- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        
        -- –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
        if input.KeyCode == Enum.KeyCode.F1 then showGUI() end
        if input.KeyCode == Enum.KeyCode.F2 then hideGUI() end
        if input.KeyCode == Enum.KeyCode.R then 
            if gui then
                gui.RadiusInput:CaptureFocus() 
            end
        end
        if input.KeyCode == Enum.KeyCode.F5 then 
            restoreOriginalFunctions()
            closeGUI() 
        end
    end)

    -- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
    workspace.DescendantAdded:Connect(function(descendant)
        if descendant:IsA("ProximityPrompt") then
            descendant.MaxActivationDistance = 10000
        end
    end)

    print("‚úÖ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø—É—â–µ–Ω!")
    print("üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:")
    print("F1 - –ü–æ–∫–∞–∑–∞—Ç—å GUI")
    print("F2 - –°–∫—Ä—ã—Ç—å GUI") 
    print("F5 - –ó–∞–∫—Ä—ã—Ç—å GUI –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏")
    print("R - –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –¥–∞–ª—å–Ω–æ—Å—Ç–∏")
    print("üìè –¢–µ–∫—É—â–∞—è –¥–∞–ª—å–Ω–æ—Å—Ç—å: " .. MAX_DISTANCE .. " studs")
end

-- –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
task.wait(2) -- –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã
initializeSystem()

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
coroutine.wrap(function()
    while true do
        task.wait(30)
        -- –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –∏—Ö –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–ª–∏
        if fireproximityprompt ~= originalFireProximityPrompt and originalFireProximityPrompt then
            fireproximityprompt = originalFireProximityPrompt
            modifyProximityPromptSystem()
        end
        
        if fireclickdetector ~= originalFireClickDetector and originalFireClickDetector then
            fireclickdetector = originalFireClickDetector
            modifyClickDetectorSystem()
        end
    end
end)()
